{
  "ignoreCommand": "# Skip non-main, non-PR branches\nif [ \"$VERCEL_GIT_COMMIT_REF\" != \"main\" ] && [ -z \"$VERCEL_GIT_PULL_REQUEST_ID\" ]; then exit 0; fi;\n# For PRs, require an explicit flag from CI to avoid duplicate previews\nif [ -n \"$VERCEL_GIT_PULL_REQUEST_ID\" ] && [ \"$VERCEL_FORCE_PREVIEW\" != \"1\" ]; then exit 0; fi;\n# Build only if files in this directory changed\ngit diff --quiet HEAD^ HEAD -- . 2>/dev/null && exit 0 || exit 1",
  "cleanUrls": true,
  "trailingSlash": false,
  "headers": [
    {
      "source": "/_astro/(.*)",
      "headers": [
        { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }
      ]
    },
    {
      "source": "/(.*)\\.(css|js|mjs|png|jpg|jpeg|gif|webp|avif|svg|ico|woff2)$",
      "headers": [
        { "key": "Cache-Control", "value": "public, max-age=31536000, immutable" }
      ]
    },
    {
      "source": "/(.*)",
      "headers": [
        { "key": "X-Content-Type-Options", "value": "nosniff" },
        { "key": "Referrer-Policy", "value": "strict-origin-when-cross-origin" },
        { "key": "X-Frame-Options", "value": "DENY" },
        { "key": "Permissions-Policy", "value": "camera=(), microphone=(), geolocation=()" }
      ]
    }
  ]
  ,
  "rewrites": [
    { "source": "/favicon.ico", "destination": "/favicon.svg" }
    ,
    { "source": "/scripts/maker-client.ts", "destination": "/scripts/maker-client" }
  ]
}
