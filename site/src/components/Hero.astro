---
const title = "Hi there!";
const subtitle = "This site is being refreshed!";
const ctaHref = "#work";
const ctaLabel = "See Work";
---

  <div class="creator-bar max-h-0 overflow-hidden bg-page opacity-0" style="--p: 0">
    <div class="grid grid-cols-1 sm:grid-cols-[1fr_auto] gap-4 items-center max-w-screen-2xl mx-auto px-pad-x">
      <div class="inline-flex items-center gap-2 font-semibold opacity-90">
        <svg class="text-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"><path d="M11 2l1.2 3.6L16 7l-3.8 1.4L11 12 9.8 8.4 6 7l3.8-1.4L11 2zM19 10l.8 2.4L22 13l-2.2.6L19 16l-.8-2.4L16 13l2.2-.6L19 10zM6 14l1 3 3 1-3 1-1 3-1-3-3-1 3-1 1-3z" fill="currentColor"/></svg>
        <span>Entering Wenzel's maker space</span>
      </div>
      <div class="inline-flex gap-4 items-center justify-self-start sm:justify-self-end">
        <span class="font-medium text-sm text-ink/80">Access is managed via Cloudflare Access + ZITADEL.</span>
      </div>
    </div>
  </div>

<!-- Dedicated mount point for access request UI -->
<div id="access-mount" class="py-3 max-w-screen-2xl mx-auto px-pad-x"></div>

<section class="max-w-screen-2xl mx-auto px-pad-x">
  <div class="relative isolate rounded-hero overflow-hidden my-4 min-h-hero bg-gradient-to-br from-sakura to-mauve text-white">
    <!-- Glossy bloom effect -->
    <div class="absolute inset-x-[-20%] top-[-30%] h-4/5 bg-gradient-radial from-white/55 via-white/15 to-transparent pointer-events-none mix-blend-soft-light"></div>

    <div class="relative z-10 py-14 px-pad-x grid gap-4">
      <h1 class="text-6xl sm:text-7xl lg:text-8xl font-normal leading-[1.02] tracking-tight">{title}</h1>
      <p class="text-lg sm:text-xl max-w-prose">{subtitle}</p>
      <a class="inline-flex items-center gap-2 bg-primary text-white rounded-full px-4 py-3 font-semibold w-fit shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all" href={ctaHref}>{ctaLabel}</a>
    </div>
  </div>
</section>

<style>
  /* Spring animation for creator bar */
  .creator-bar {
    max-height: calc(72px * var(--p, 0));
    opacity: var(--p, 0);
  }

  /* Fallback: if JS spring doesn't run, honor attribute toggle */
  html[data-creator="open"] .creator-bar {
    --p: 1;
    max-height: 72px;
    opacity: 1;
  }
</style>
<script type="module" is:inline>
  // Expressive spring for the bar (fast spatial)
  let raf = 0; let current = 0; let target = 0; let lastTs = 0;
  const SPRING = { stiffness: 540, damping: 32 };
  const creatorBar = document.querySelector('.creator-bar');

  function tick(ts){
    if(!lastTs) lastTs = ts; const dt = Math.min(32, ts - lastTs); lastTs = ts;
    const delta = target - current;
    const accel = delta * SPRING.stiffness - current * SPRING.damping;
    current += accel * (dt / 1000);
    current = Math.max(0, Math.min(1, current));
    creatorBar?.style.setProperty('--p', String(current));
    if (Math.abs(delta) > 0.002) {
      raf = requestAnimationFrame(tick);
    } else {
      current = target;
      creatorBar?.style.setProperty('--p', String(target));
      raf = 0;
      lastTs = 0;
    }
  }

  window.addEventListener('toggle-creator', (ev) => {
    const open = ev.detail?.open;
    target = open ? 1 : 0;
    if (!raf) raf = requestAnimationFrame(tick);
  });
</script>
