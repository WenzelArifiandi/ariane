---
let result = "Testing..."
let tokenValue = import.meta.env.STORYBLOK_TOKEN

try {
  // Simple fetch test
  const response = await fetch(`https://api.storyblok.com/v2/cdn/spaces/me?token=${tokenValue}`)
  const data = await response.json()

  if (response.ok) {
    result = `✅ Token works! Space: ${data.space?.name || 'Unknown'}`
  } else {
    result = `❌ Token failed: ${data.error || 'Unknown error'}`
  }
} catch (error) {
  result = `❌ Network error: ${error instanceof Error ? error.message : String(error)}`
}
---

<html>
<head>
  <title>Simple Storyblok Test</title>
</head>
<body style="font-family: system-ui; padding: 2rem; max-width: 600px; margin: 0 auto;">
  <h1>Storyblok Token Test</h1>

  <div style="padding: 1rem; background: #f5f5f5; border-radius: 8px; margin: 1rem 0;">
    <h2>Result:</h2>
    <p style="font-size: 1.2rem; font-weight: bold;">{result}</p>
  </div>

  <div style="margin-top: 2rem;">
    <h3>Token Info:</h3>
    <p>Token starts with: <code>{tokenValue ? tokenValue.substring(0, 8) + '...' : 'NOT FOUND'}</code></p>
    <p>Token length: <code>{tokenValue ? tokenValue.length : 0} characters</code></p>
  </div>

  <div style="margin-top: 2rem;">
    <h3>Next Steps:</h3>
    <ul>
      <li>If you see ✅, your token is working!</li>
      <li>If you see ❌, double-check you copied the Preview token from Storyblok</li>
      <li>Make sure you're in the right Storyblok space</li>
    </ul>
  </div>
</body>
</html>