---
import { useStoryblokApi } from '@storyblok/astro'
import StoryblokComponent from '@storyblok/astro/StoryblokComponent.astro'
import Base from '../layouts/Base.astro'

const storyblokApi = useStoryblokApi()
let story: any = null
let error: string | null = null

try {
  const { data } = await storyblokApi.get('cdn/stories/about', { version: 'draft' })
  story = data?.story ?? null
} catch (e: any) {
  error = e?.message ?? 'Failed to load About content'
}
---
<Base title={story?.name ? `${story.name} — Ariane` : 'About — Ariane'} description={story?.content?.description ?? 'About the designer.'}>
  {story ? (
    <StoryblokComponent blok={story.content} />
  ) : error ? (
    <p class="mt-6 text-neutral-500">Could not load About content. <small>{error}</small></p>
  ) : (
    <p class="mt-6 text-neutral-500">Loading About content…</p>
  )}
</Base>
